---
- name: Setup httpd and open firewall port
  hosts: all

  tasks: 
  - name: Install apache packages
    apt:
     name: apache2
     state: present
  - name: start apache2
    service:
     name: apache2
     state:  started  
  - name:  Open port 80 for http access
    firewalld:
      service: apache2
      premanent: true
      state: enable
  - name:   Restart firwalld service to load firewall changes
    service:
     name: firewalld
     state: reload

